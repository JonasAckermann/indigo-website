<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>unused/animation · Indigo</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="# Animation"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="unused/animation · Indigo"/><meta property="og:type" content="website"/><meta property="og:url" content="https://your-docusaurus-test-site.com/"/><meta property="og:description" content="# Animation"/><meta property="og:image" content="https://your-docusaurus-test-site.com/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://your-docusaurus-test-site.com/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/img/indigo_logo_solid.svg"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/indigo_logo_solid_text.svg" alt="Indigo"/><h2 class="headerTitleWithLogo">Indigo</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"></ul></nav></div></header></div></div><div class="navPusher singleRowMobileNav"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">unused/animation</h1></header><article><div><span><h1><a class="anchor" aria-hidden="true" id="animation"></a><a href="#animation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Animation</h1>
<p>There are two type of animations found in Indigo.</p>
<ol>
<li>Timeline or Key frame based animations.</li>
<li>Procedural or programmed animations.</li>
</ol>
<h2><a class="anchor" aria-hidden="true" id="timeline-animations"></a><a href="#timeline-animations" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Timeline Animations</h2>
<p>The idea with Indigo has always been that it's a &quot;code-only&quot; game engine. There are better tools out there for the many and varied other tasks associated with game production, and Indigo is aimed at people who like tools that do one job well.</p>
<p>As such, the expectation is that you'll use a tool in order to manufacture animation sprite sheets, and import them into Indigo.</p>
<p>An example of this is that Indigo already has support for Aseprite (an excellent pixel art editor), and the process is:</p>
<ol>
<li>Create your animation in Aseprite.</li>
<li>Export the animations and frames as a sprite sheet and a JSON description.</li>
<li>Add the sprite sheet and JSON description as a static asset to Indigo.</li>
<li>During startup, use the Aseprite helper class to parse the JSON into an animations object and add it to the <code>Startup</code> result type, thereby making it available to your game.</li>
<li>You then create a <code>Sprite</code> and associate it to the Animation using an <code>AnimationKey</code>.</li>
<li>In your game view logic, you can then control the animation by calling the animation functions on the sprite: <code>play</code>, <code>changeCycle</code>, <code>jumpToFirstFrame</code>, <code>jumpToLastFrame</code>, and <code>jumpToFrame</code>.</li>
</ol>
<p>See the Sprite example for a very basic, hand rolled animation example.</p>
<h2><a class="anchor" aria-hidden="true" id="procedural-animations"></a><a href="#procedural-animations" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Procedural Animations</h2>
<h3><a class="anchor" aria-hidden="true" id="describing-movement-with-code-time-vs-frames"></a><a href="#describing-movement-with-code-time-vs-frames" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Describing movement with code, Time vs Frames</h3>
<p>The other kind of animation, is animation described in code, and this comes in essentially three forms.</p>
<h3><a class="anchor" aria-hidden="true" id="diy--manually-coded"></a><a href="#diy--manually-coded" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>DIY / Manually Coded.</h3>
<p>It is entirely reasonable to just do the animation yourself - you're a capable programmer after all! How hard can it be to make something move across the screen?</p>
<p>The main gotcha to be aware of with this kind of programming, is that the amount of time that passes between frames is not even remotely consistent. In other words, you can't add <code>1</code> to a characters <code>x</code> position and expect it to move smoothly across the screen.</p>
<p>All movement must therefore be described in terms of the amount of time that has passed, and there are a few helpful functions on the <code>GameTime</code> you are supplied on every frame to help you do that.</p>
<p>Timeline animations, Time Varying Values, and Signals already have time either taken care of or factored into the equation for you in some way or other.</p>
<h3><a class="anchor" aria-hidden="true" id="time-varying-values"></a><a href="#time-varying-values" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Time Varying Values</h3>
<p><code>TimeVaryingValue</code> are stateful little constructs that you need to call the update function on yourself every frame tick.</p>
<p>However, they're very useful! An easy example:</p>
<p>You have a little lumber jack, he walks over to a tree and is now going to cut to down. Work is effort over time, so you have a <code>TimeVaryingValue</code> like this in your model:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">val</span> woodChoppingProcess: <span class="hljs-type">TimeVaryingValue</span> =
  <span class="hljs-type">TimeVaryingValue</span>(<span class="hljs-number">0</span>, gameTime.running) <span class="hljs-comment">// No progress, starting now.</span>

<span class="hljs-keyword">final</span> <span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LumberJack</span>(<span class="hljs-params">chopWood: <span class="hljs-type">TimeVaryingValue</span>, working: <span class="hljs-type">Boolean</span></span>) </span>{
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">update</span></span>(gameTime): <span class="hljs-type">LumberJack</span> =
    <span class="hljs-keyword">if</span>(working) {
      <span class="hljs-keyword">this</span>.copy(
        chopWood = chopWood.increaseTo(
          <span class="hljs-number">100</span>,             <span class="hljs-comment">// upper limit</span>
          <span class="hljs-number">10</span>,              <span class="hljs-comment">// units per second</span>
          gameTime.running <span class="hljs-comment">// current time</span>
        )
      )
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">this</span>
}
<span class="hljs-keyword">val</span> lumberJack = <span class="hljs-type">LumberJack</span>(woodChoppingProcess, <span class="hljs-literal">true</span>)
</code></pre>
<p>And then when you update the lumberJack during your frame update <code>lumberJack.update(gameTime)</code>.</p>
<p>You can then render a progress bar as a percentage in the view by simply asking the <code>TimeVaryingValue</code> for its current <code>value</code>.</p>
<h3><a class="anchor" aria-hidden="true" id="signals-signal-functions--automata"></a><a href="#signals-signal-functions--automata" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Signals, Signal Functions &amp; Automata</h3>
<p>// TODO</p>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#timeline-animations">Timeline Animations</a></li><li><a href="#procedural-animations">Procedural Animations</a><ul class="toc-headings"><li><a href="#describing-movement-with-code-time-vs-frames">Describing movement with code, Time vs Frames</a></li><li><a href="#diy--manually-coded">DIY / Manually Coded.</a></li><li><a href="#time-varying-values">Time Varying Values</a></li><li><a href="#signals-signal-functions--automata">Signals, Signal Functions &amp; Automata</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/indigo_logo.svg" alt="Indigo" width="66" height="58"/></a><div><h5>Getting Started (coming soon)</h5></div><div><h5>Community</h5><a href="https://discord.gg/b5CD47g">Discord</a><a href="https://twitter.com/indigoengine" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="https://github.com/PurpleKingdomGames/indigo">GitHub</a><a class="github-button" href="https://github.com/PurpleKingdomGames/indigo" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">Copyright © 2020 Purple Kingdom Games Limited</section></footer></div></body></html>